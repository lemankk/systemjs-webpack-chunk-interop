{"version":3,"file":"webpack-plugin.js","sources":["../src/webpack-plugin.js"],"sourcesContent":["const {default: InjectPlugin} = require('webpack-inject-plugin');\n\nfunction loader(options) {\n  return () => {\n    const { shared = [], systemJsInstanceName = \"window.System\", embedSystemJs = true, extras = ['amd','named-exports','transform'] } = options;\n\n    // Creating \n    // Remark: arrow function is not supported in IE\n    const packageMaps = shared.map((packageName) => {\n      return `\"${packageName}\": function() {return import(\"${packageName}\");}`;\n    })\n    \n    return `\n${ !!embedSystemJs && 'require(\"systemjs/dist/system\");'}\n${ !!embedSystemJs && !!extras && extras.length >0 && extras.map( extraName => `require(\"systemjs/dist/extras/${extraName}\");`).join(\"\\n\")}\nrequire(\"__package_name__\");\n\nvar imports = {\n${packageMaps.join(\",\\n\")}\n};\n\n${systemJsInstanceName}.appendImportMap(imports);\n`;\n  };\n}\n \nmodule.exports = class SystemJsWebpackChunkInteropPlugin {\n  constructor(options) {\n    this.options = options;\n  }\n \n  apply(compiler) {\n    new InjectPlugin(loader(this.options)).apply(compiler);\n  }\n}"],"names":["require","InjectPlugin","loader","options","shared","systemJsInstanceName","embedSystemJs","extras","packageMaps","map","packageName","length","extraName","join","module","exports","compiler","apply"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;eAAgCA,OAAO,CAAC,uBAAD;IAAvBC;;AAEhB,SAASC,MAAT,CAAgBC,OAAhB,EAAyB;AACvB,SAAO,YAAM;AAAA,0BACyHA,OADzH,CACHC,MADG;AAAA,QACHA,MADG,gCACM,EADN;AAAA,gCACyHD,OADzH,CACUE,oBADV;AAAA,QACUA,oBADV,sCACiC,eADjC;AAAA,gCACyHF,OADzH,CACkDG,aADlD;AAAA,QACkDA,aADlD,sCACkE,IADlE;AAAA,0BACyHH,OADzH,CACwEI,MADxE;AAAA,QACwEA,MADxE,gCACiF,CAAC,KAAD,EAAO,eAAP,EAAuB,WAAvB,CADjF;AAIX;;AACA,QAAMC,WAAW,GAAGJ,MAAM,CAACK,GAAP,CAAW,UAACC,WAAD,EAAiB;AAC9C,yBAAWA,WAAX,6CAAuDA,WAAvD;AACD,KAFmB,CAApB;AAIA,uBACD,CAAC,CAACJ,aAAF,IAAmB,kCADlB,eAED,CAAC,CAACA,aAAF,IAAmB,CAAC,CAACC,MAArB,IAA+BA,MAAM,CAACI,MAAP,GAAe,CAA9C,IAAmDJ,MAAM,CAACE,GAAP,CAAY,UAAAG,SAAS;AAAA,sDAAqCA,SAArC;AAAA,KAArB,EAA0EC,IAA1E,CAA+E,IAA/E,CAFlD,gFAMFL,WAAW,CAACK,IAAZ,CAAiB,KAAjB,CANE,qBASFR,oBATE;AAWD,GApBD;AAqBD;;AAEDS,MAAM,CAACC,OAAP;AACE,6CAAYZ,OAAZ,EAAqB;AAAA;;AACnB,SAAKA,OAAL,GAAeA,OAAf;AACD;;AAHH;AAAA;AAAA,0BAKQa,QALR,EAKkB;AACd,UAAIf,YAAJ,CAAiBC,MAAM,CAAC,KAAKC,OAAN,CAAvB,EAAuCc,KAAvC,CAA6CD,QAA7C;AACD;AAPH;;AAAA;AAAA;;"}